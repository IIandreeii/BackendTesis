{
    "sourceFile": "src/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 16,
            "patches": [
                {
                    "date": 1731016390298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1731016496353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n \n import major from './routes/index.js';\n import auth from './routes/authentication.js';\n import mercadopago from './routes/mercadopago.js';\n+import posts from './routes/posts.js';\n import connectDB from './database.js';\n import Message from './models/Message.js';\n \n import './lib/auth.js';\n@@ -44,8 +45,9 @@\n // Routes\n app.use(major);\n app.use(auth);\n app.use(mercadopago);\n+app.use('/posts', posts);\n \n // WebSocket connection\n io.on('connection', (socket) => {\n     console.log('Nuevo cliente conectado:', socket.id);\n"
                },
                {
                    "date": 1731024229071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n         origin: '*',\n     }\n });\n \n-app.set('port', process.env.PORT);\n+app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n \n // Middlewares\n app.use(morgan('dev'));\n app.use(express.json());\n"
                },
                {
                    "date": 1731025096421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,8 +51,13 @@\n // WebSocket connection\n io.on('connection', (socket) => {\n     console.log('Nuevo cliente conectado:', socket.id);\n \n+    // Añadir mensaje de consola cuando el cliente está en línea\n+    socket.on('online', () => {\n+        console.log(`Cliente ${socket.id} está en línea`);\n+    });\n+\n     socket.on('joinRoom', ({ userId, organizationId }) => {\n         const room = `${userId}-${organizationId}`;\n         socket.join(room);\n         console.log(`Usuario ${userId} se unió a la sala ${room}`);\n"
                },
                {
                    "date": 1731025157501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,91 @@\n+import express from 'express';\n+import dotenv from 'dotenv';\n+import morgan from 'morgan';\n+import bodyParser from 'body-parser';\n+import passport from 'passport';\n+import cors from 'cors';\n+import { createServer } from 'http';\n+import { Server } from 'socket.io';\n+\n+import major from './routes/index.js';\n+import auth from './routes/authentication.js';\n+import mercadopago from './routes/mercadopago.js';\n+import posts from './routes/posts.js';\n+import connectDB from './database.js';\n+import Message from './models/Message.js';\n+\n+import './lib/auth.js';\n+\n+dotenv.config();\n+\n+connectDB();\n+\n+const app = express();\n+const server = createServer(app);\n+const io = new Server(server, {\n+    cors: {\n+        origin: '*',\n+    }\n+});\n+\n+app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n+\n+// Middlewares\n+app.use(morgan('dev'));\n+app.use(express.json());\n+app.use(bodyParser.json());\n+app.use(passport.initialize());\n+app.use(cors());\n+\n+app.use((req, res, next) => {\n+    app.locals.user = req.user;\n+    next();\n+});\n+\n+// Routes\n+app.use(major);\n+app.use(auth);\n+app.use(mercadopago);\n+app.use('/posts', posts);\n+\n+// WebSocket connection\n+io.on('connection', (socket) => {\n+    console.log('Nuevo cliente conectado:', socket.id);\n+\n+    // Añadir mensaje de consola cuando el cliente está en línea\n+    socket.on('online', () => {\n+        console.log(`Cliente ${socket.id} está en línea`);\n+    });\n+\n+    socket.on('joinRoom', ({ userId, organizationId }) => {\n+        const room = `${userId}-${organizationId}`;\n+        socket.join(room);\n+        console.log(`Usuario ${userId} se unió a la sala ${room}`);\n+    });\n+\n+    socket.on('sendMessage', async ({ userId, organizationId, message }) => {\n+        const room = `${userId}-${organizationId}`;\n+        const newMessage = new Message({\n+            sender: userId,\n+            receiver: organizationId,\n+            content: message,\n+        });\n+        await newMessage.save();\n+        io.to(room).emit('receiveMessage', { userId, organizationId, message });\n+        console.log(`Mensaje enviado a la sala ${room}: ${message}`);\n+    });\n+\n+    socket.on('disconnect', () => {\n+        console.log('Cliente desconectado:', socket.id);\n+    });\n+});\n+\n+server.listen(app.get('port'), () => {\n+    console.log('Server on port', app.get('port'));\n+});\n+\n+\n+\n+\n+\n+\n"
                },
                {
                    "date": 1731026904156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,39 +48,10 @@\n app.use(mercadopago);\n app.use('/posts', posts);\n \n // WebSocket connection\n-io.on('connection', (socket) => {\n-    console.log('Nuevo cliente conectado:', socket.id);\n \n-    // Añadir mensaje de consola cuando el cliente está en línea\n-    socket.on('online', () => {\n-        console.log(`Cliente ${socket.id} está en línea`);\n-    });\n \n-    socket.on('joinRoom', ({ userId, organizationId }) => {\n-        const room = `${userId}-${organizationId}`;\n-        socket.join(room);\n-        console.log(`Usuario ${userId} se unió a la sala ${room}`);\n-    });\n-\n-    socket.on('sendMessage', async ({ userId, organizationId, message }) => {\n-        const room = `${userId}-${organizationId}`;\n-        const newMessage = new Message({\n-            sender: userId,\n-            receiver: organizationId,\n-            content: message,\n-        });\n-        await newMessage.save();\n-        io.to(room).emit('receiveMessage', { userId, organizationId, message });\n-        console.log(`Mensaje enviado a la sala ${room}: ${message}`);\n-    });\n-\n-    socket.on('disconnect', () => {\n-        console.log('Cliente desconectado:', socket.id);\n-    });\n-});\n-\n server.listen(app.get('port'), () => {\n     console.log('Server on port', app.get('port'));\n });\n \n@@ -88,95 +59,4 @@\n \n \n \n \n-import express from 'express';\n-import dotenv from 'dotenv';\n-import morgan from 'morgan';\n-import bodyParser from 'body-parser';\n-import passport from 'passport';\n-import cors from 'cors';\n-import { createServer } from 'http';\n-import { Server } from 'socket.io';\n-\n-import major from './routes/index.js';\n-import auth from './routes/authentication.js';\n-import mercadopago from './routes/mercadopago.js';\n-import posts from './routes/posts.js';\n-import connectDB from './database.js';\n-import Message from './models/Message.js';\n-\n-import './lib/auth.js';\n-\n-dotenv.config();\n-\n-connectDB();\n-\n-const app = express();\n-const server = createServer(app);\n-const io = new Server(server, {\n-    cors: {\n-        origin: '*',\n-    }\n-});\n-\n-app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n-\n-// Middlewares\n-app.use(morgan('dev'));\n-app.use(express.json());\n-app.use(bodyParser.json());\n-app.use(passport.initialize());\n-app.use(cors());\n-\n-app.use((req, res, next) => {\n-    app.locals.user = req.user;\n-    next();\n-});\n-\n-// Routes\n-app.use(major);\n-app.use(auth);\n-app.use(mercadopago);\n-app.use('/posts', posts);\n-\n-// WebSocket connection\n-io.on('connection', (socket) => {\n-    console.log('Nuevo cliente conectado:', socket.id);\n-\n-    // Añadir mensaje de consola cuando el cliente está en línea\n-    socket.on('online', () => {\n-        console.log(`Cliente ${socket.id} está en línea`);\n-    });\n-\n-    socket.on('joinRoom', ({ userId, organizationId }) => {\n-        const room = `${userId}-${organizationId}`;\n-        socket.join(room);\n-        console.log(`Usuario ${userId} se unió a la sala ${room}`);\n-    });\n-\n-    socket.on('sendMessage', async ({ userId, organizationId, message }) => {\n-        const room = `${userId}-${organizationId}`;\n-        const newMessage = new Message({\n-            sender: userId,\n-            receiver: organizationId,\n-            content: message,\n-        });\n-        await newMessage.save();\n-        io.to(room).emit('receiveMessage', { userId, organizationId, message });\n-        console.log(`Mensaje enviado a la sala ${room}: ${message}`);\n-    });\n-\n-    socket.on('disconnect', () => {\n-        console.log('Cliente desconectado:', socket.id);\n-    });\n-});\n-\n-server.listen(app.get('port'), () => {\n-    console.log('Server on port', app.get('port'));\n-});\n-\n-\n-\n-\n-\n-\n"
                },
                {
                    "date": 1731026913594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,10 +11,10 @@\n import auth from './routes/authentication.js';\n import mercadopago from './routes/mercadopago.js';\n import posts from './routes/posts.js';\n import connectDB from './database.js';\n-import Message from './models/Message.js';\n \n+\n import './lib/auth.js';\n \n dotenv.config();\n \n"
                },
                {
                    "date": 1731026922415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,14 +4,14 @@\n import bodyParser from 'body-parser';\n import passport from 'passport';\n import cors from 'cors';\n import { createServer } from 'http';\n-import { Server } from 'socket.io';\n \n+\n import major from './routes/index.js';\n import auth from './routes/authentication.js';\n import mercadopago from './routes/mercadopago.js';\n-import posts from './routes/posts.js';\n+\n import connectDB from './database.js';\n \n \n import './lib/auth.js';\n"
                },
                {
                    "date": 1731026937666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,58 @@\n+import express from 'express';\n+import dotenv from 'dotenv';\n+import morgan from 'morgan';\n+import bodyParser from 'body-parser';\n+import passport from 'passport';\n+import cors from 'cors';\n+import { createServer } from 'http';\n+\n+\n+import major from './routes/index.js';\n+import auth from './routes/authentication.js';\n+import mercadopago from './routes/mercadopago.js';\n+\n+import connectDB from './database.js';\n+\n+\n+import './lib/auth.js';\n+\n+dotenv.config();\n+\n+connectDB();\n+\n+const app = express();\n+const server = createServer(app);\n+\n+\n+app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n+\n+// Middlewares\n+app.use(morgan('dev'));\n+app.use(express.json());\n+app.use(bodyParser.json());\n+app.use(passport.initialize());\n+app.use(cors());\n+\n+app.use((req, res, next) => {\n+    app.locals.user = req.user;\n+    next();\n+});\n+\n+// Routes\n+app.use(major);\n+app.use(auth);\n+app.use(mercadopago);\n+app.use('/posts', posts);\n+\n+// WebSocket connection\n+\n+\n+server.listen(app.get('port'), () => {\n+    console.log('Server on port', app.get('port'));\n+});\n+\n+\n+\n+\n+\n+\n"
                },
                {
                    "date": 1731026946872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,72 +41,10 @@\n // Routes\n app.use(major);\n app.use(auth);\n app.use(mercadopago);\n-app.use('/posts', posts);\n \n-// WebSocket connection\n \n-\n-server.listen(app.get('port'), () => {\n-    console.log('Server on port', app.get('port'));\n-});\n-\n-\n-\n-\n-\n-\n-import express from 'express';\n-import dotenv from 'dotenv';\n-import morgan from 'morgan';\n-import bodyParser from 'body-parser';\n-import passport from 'passport';\n-import cors from 'cors';\n-import { createServer } from 'http';\n-\n-\n-import major from './routes/index.js';\n-import auth from './routes/authentication.js';\n-import mercadopago from './routes/mercadopago.js';\n-\n-import connectDB from './database.js';\n-\n-\n-import './lib/auth.js';\n-\n-dotenv.config();\n-\n-connectDB();\n-\n-const app = express();\n-const server = createServer(app);\n-const io = new Server(server, {\n-    cors: {\n-        origin: '*',\n-    }\n-});\n-\n-app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n-\n-// Middlewares\n-app.use(morgan('dev'));\n-app.use(express.json());\n-app.use(bodyParser.json());\n-app.use(passport.initialize());\n-app.use(cors());\n-\n-app.use((req, res, next) => {\n-    app.locals.user = req.user;\n-    next();\n-});\n-\n-// Routes\n-app.use(major);\n-app.use(auth);\n-app.use(mercadopago);\n-app.use('/posts', posts);\n-\n // WebSocket connection\n \n \n server.listen(app.get('port'), () => {\n"
                },
                {
                    "date": 1731031598212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,58 @@\n+import express from 'express';\n+import dotenv from 'dotenv';\n+import morgan from 'morgan';\n+import bodyParser from 'body-parser';\n+import passport from 'passport';\n+import cors from 'cors';\n+import { createServer } from 'http';\n+\n+\n+import major from './routes/index.js';\n+import auth from './routes/authentication.js';\n+import mercadopago from './routes/mercadopago.js';\n+\n+import connectDB from './database.js';\n+\n+\n+import './lib/auth.js';\n+\n+dotenv.config();\n+\n+connectDB();\n+\n+const app = express();\n+const server = createServer(app);\n+\n+\n+app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n+\n+// Middlewares\n+app.use(morgan('dev'));\n+app.use(express.json());\n+app.use(bodyParser.json());\n+app.use(passport.initialize());\n+app.use(cors());\n+\n+app.use((req, res, next) => {\n+    app.locals.user = req.user;\n+    next();\n+});\n+\n+// Routes\n+app.use(major);\n+app.use(auth);\n+app.use(mercadopago);\n+\n+\n+\n+\n+\n+server.listen(app.get('port'), () => {\n+    console.log('Server on port', app.get('port'));\n+});\n+\n+\n+\n+\n+\n+\n"
                },
                {
                    "date": 1731368143677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,77 +4,22 @@\n import bodyParser from 'body-parser';\n import passport from 'passport';\n import cors from 'cors';\n import { createServer } from 'http';\n-\n-\n import major from './routes/index.js';\n import auth from './routes/authentication.js';\n import mercadopago from './routes/mercadopago.js';\n-\n import connectDB from './database.js';\n-\n-\n import './lib/auth.js';\n \n-dotenv.config();\n \n-connectDB();\n \n-const app = express();\n-const server = createServer(app);\n \n \n-app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n \n-// Middlewares\n-app.use(morgan('dev'));\n-app.use(express.json());\n-app.use(bodyParser.json());\n-app.use(passport.initialize());\n-app.use(cors());\n \n-app.use((req, res, next) => {\n-    app.locals.user = req.user;\n-    next();\n-});\n \n-// Routes\n-app.use(major);\n-app.use(auth);\n-app.use(mercadopago);\n \n-\n-\n-\n-\n-server.listen(app.get('port'), () => {\n-    console.log('Server on port', app.get('port'));\n-});\n-\n-\n-\n-\n-\n-\n-import express from 'express';\n-import dotenv from 'dotenv';\n-import morgan from 'morgan';\n-import bodyParser from 'body-parser';\n-import passport from 'passport';\n-import cors from 'cors';\n-import { createServer } from 'http';\n-\n-\n-import major from './routes/index.js';\n-import auth from './routes/authentication.js';\n-import mercadopago from './routes/mercadopago.js';\n-\n-import connectDB from './database.js';\n-\n-\n-import './lib/auth.js';\n-\n dotenv.config();\n \n connectDB();\n \n@@ -101,11 +46,11 @@\n app.use(auth);\n app.use(mercadopago);\n \n \n-// WebSocket connection\n \n \n+\n server.listen(app.get('port'), () => {\n     console.log('Server on port', app.get('port'));\n });\n \n"
                },
                {
                    "date": 1731368150908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,15 +11,15 @@\n import connectDB from './database.js';\n import './lib/auth.js';\n \n \n+import\n \n \n \n \n \n \n-\n dotenv.config();\n \n connectDB();\n \n"
                },
                {
                    "date": 1731368163619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n import connectDB from './database.js';\n import './lib/auth.js';\n \n \n-import\n+import { Ser}\n \n \n \n \n"
                },
                {
                    "date": 1731368202199,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,15 +11,15 @@\n import connectDB from './database.js';\n import './lib/auth.js';\n \n \n-import { Ser}\n+import { Server } from 'socket.io';\n \n+import\n \n \n \n \n-\n dotenv.config();\n \n connectDB();\n \n"
                },
                {
                    "date": 1731368209251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n \n \n import { Server } from 'socket.io';\n \n-import h from \n+import h from 'http'\n \n \n \n \n"
                },
                {
                    "date": 1731368260066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,61 @@\n+import express from 'express';\n+import dotenv from 'dotenv';\n+import morgan from 'morgan';\n+import bodyParser from 'body-parser';\n+import passport from 'passport';\n+import cors from 'cors';\n+import { createServer } from 'http';\n+import major from './routes/index.js';\n+import auth from './routes/authentication.js';\n+import mercadopago from './routes/mercadopago.js';\n+import connectDB from './database.js';\n+import './lib/auth.js';\n+\n+\n+import { Server } from 'socket.io';\n+\n+import http from 'http'\n+\n+\n+\n+\n+dotenv.config();\n+\n+connectDB();\n+\n+const app = express();\n+const server = http.createServer(app);\n+\n+\n+app.set('port', process.env.PORT || 3001); // Cambia el puerto aquí\n+\n+// Middlewares\n+app.use(morgan('dev'));\n+app.use(express.json());\n+app.use(bodyParser.json());\n+app.use(passport.initialize());\n+app.use(cors());\n+\n+app.use((req, res, next) => {\n+    app.locals.user = req.user;\n+    next();\n+});\n+\n+// Routes\n+app.use(major);\n+app.use(auth);\n+app.use(mercadopago);\n+\n+\n+\n+\n+\n+server.listen(app.get('port'), () => {\n+    console.log('Server on port', app.get('port'));\n+});\n+\n+\n+\n+\n+\n+\n"
                }
            ],
            "date": 1731016390298,
            "name": "Commit-0",
            "content": "import express from 'express';\nimport dotenv from 'dotenv';\nimport morgan from 'morgan';\nimport bodyParser from 'body-parser';\nimport passport from 'passport';\nimport cors from 'cors';\nimport { createServer } from 'http';\nimport { Server } from 'socket.io';\n\nimport major from './routes/index.js';\nimport auth from './routes/authentication.js';\nimport mercadopago from './routes/mercadopago.js';\nimport connectDB from './database.js';\nimport Message from './models/Message.js';\n\nimport './lib/auth.js';\n\ndotenv.config();\n\nconnectDB();\n\nconst app = express();\nconst server = createServer(app);\nconst io = new Server(server, {\n    cors: {\n        origin: '*',\n    }\n});\n\napp.set('port', process.env.PORT);\n\n// Middlewares\napp.use(morgan('dev'));\napp.use(express.json());\napp.use(bodyParser.json());\napp.use(passport.initialize());\napp.use(cors());\n\napp.use((req, res, next) => {\n    app.locals.user = req.user;\n    next();\n});\n\n// Routes\napp.use(major);\napp.use(auth);\napp.use(mercadopago);\n\n// WebSocket connection\nio.on('connection', (socket) => {\n    console.log('Nuevo cliente conectado:', socket.id);\n\n    socket.on('joinRoom', ({ userId, organizationId }) => {\n        const room = `${userId}-${organizationId}`;\n        socket.join(room);\n        console.log(`Usuario ${userId} se unió a la sala ${room}`);\n    });\n\n    socket.on('sendMessage', async ({ userId, organizationId, message }) => {\n        const room = `${userId}-${organizationId}`;\n        const newMessage = new Message({\n            sender: userId,\n            receiver: organizationId,\n            content: message,\n        });\n        await newMessage.save();\n        io.to(room).emit('receiveMessage', { userId, organizationId, message });\n        console.log(`Mensaje enviado a la sala ${room}: ${message}`);\n    });\n\n    socket.on('disconnect', () => {\n        console.log('Cliente desconectado:', socket.id);\n    });\n});\n\nserver.listen(app.get('port'), () => {\n    console.log('Server on port', app.get('port'));\n});\n\n\n\n\n\n\n"
        }
    ]
}